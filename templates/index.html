{% extends "master.html" %}

{% block head %}
<!-- CSS Stuff -->
<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />

<!-- <h3>Hello, {{ current_user.username }}.</h3> -->

<a href="{{ url_for('logout') }}"><button type="button">Log Out</button></a>
{% endblock %}

{% block body %}
<!--
Add sliding side bar for side menu to select online users.
<table>
  <thead>
     <tr>
        <th>id</th>
        <th>Username</th>
        <th>last_active</th>
     </tr>
  </thead>

  <tbody>
     {% for user in users %}
        <tr>
           <td>{{ user.id }}</td>
           <td>{{ user.username }}</td>
           <td>{{ user.last_active }}</td>
        </tr>
     {% endfor %}
  </tbody>
</table> -->

<div class="container">
  <div id="existingChats">
  <h2>Existing, recent chats</h2>
    <div id="chatsContainer">
      <ul id="chats">
        {% for chat_id in current_user['chats'] %}
          <a href="{{ url_for('chats', chat_id=chat_id) }}"> <li> {{ chat_id }} </li> </a>
        {% endfor %}
      </ul>
    </div>
  </div>
  <!-- <h2>Chats</h2> -->

  <div id="chatBox">
    {% if users_in_chat %}
    <h1>
      {% for u in users_in_chat %}
        {{ u }}
        <!-- MAYBE TTHE NAME COULD BE A LINK TO SOMETING -->
      {% endfor %}
    </h1>
    {% endif %}
    <div id="messagesContainer">
      {% if messages %}
        <ul id="messages">
          {% for m in messages %}
            <li> {{ m['message'] }} </li>
          {% endfor %}
        </ul>
      {% else %}
        <h1> Click on some shit to start, {{ current_user['username'] }}. </h1>
      {% endif %}
    </div>

    <form id="inputForm">
      <input id="inputText" type="text" placeholder="Send a message"/>
      <button type="submit" id="sendButton">Send</button>
    </form>

  </div>

</div>
{% endblock %}

{% block footer %}
<script type="text/javascript"  src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='index.js') }}"></script>
{% endblock %}
